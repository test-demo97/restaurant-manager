/**
 * RESTAURANT MANAGER SYSTEM
 * Copyright (c) 2025 Andrea Fabbri. Tutti i diritti riservati.
 * Licenza: Proprietaria - Vedere file LICENSE
 */

@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    @apply border-dark-700;
  }

  html {
    /* Prevenire bounce su iOS */
    overscroll-behavior: none;
    /* Safe area per iPhone con notch */
    padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
  }

  /* Desktop scaling - riduce lo zoom del ~12% su schermi grandi */
  @media (min-width: 1024px) {
    html {
      font-size: 14px; /* Default 16px, ridotto a 14px = ~12% piÃ¹ piccolo */
    }
  }

  /* Schermi molto grandi (1440p+) */
  @media (min-width: 1920px) {
    html {
      font-size: 15px;
    }
  }

  body {
    @apply bg-dark-950 text-white font-sans antialiased;
    margin: 0;
    /* Prevenire highlight blu su tap mobile */
    -webkit-tap-highlight-color: transparent;
    /* Prevenire selezione testo accidentale */
    -webkit-user-select: none;
    user-select: none;
    /* Smooth scroll */
    scroll-behavior: smooth;
  }

  /* Permettere selezione solo negli input */
  input, textarea, [contenteditable="true"] {
    -webkit-user-select: text;
    user-select: text;
  }

  /* Input con font-size >= 16px per prevenire zoom su iOS */
  input, select, textarea {
    font-size: 16px;
  }

  /* Scrollbar per desktop */
  @media (min-width: 1024px) {
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    ::-webkit-scrollbar-track {
      @apply bg-dark-900;
    }

    ::-webkit-scrollbar-thumb {
      @apply bg-dark-600 rounded-full;
    }

    ::-webkit-scrollbar-thumb:hover {
      @apply bg-dark-500;
    }
  }

  /* Nascondere scrollbar su mobile ma mantenere scroll */
  @media (max-width: 1023px) {
    ::-webkit-scrollbar {
      display: none;
    }

    * {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }
  }
}

@layer components {
  .btn {
    @apply inline-flex items-center justify-center gap-2 rounded-xl font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-dark-900 disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .btn-primary {
    @apply btn bg-primary-500 text-dark-900 hover:bg-primary-400 focus:ring-primary-500 px-6 py-3;
  }

  .btn-secondary {
    @apply btn bg-dark-700 text-white hover:bg-dark-600 focus:ring-dark-500 px-6 py-3;
  }

  .btn-danger {
    @apply btn bg-red-600 text-white hover:bg-red-500 focus:ring-red-500 px-6 py-3;
  }

  .btn-success {
    @apply btn bg-emerald-600 text-white hover:bg-emerald-500 focus:ring-emerald-500 px-6 py-3;
  }

  .btn-ghost {
    @apply btn bg-transparent text-white hover:bg-dark-800 focus:ring-dark-500 px-4 py-2;
  }

  .btn-icon {
    @apply btn p-3 bg-dark-800 hover:bg-dark-700 rounded-xl;
  }

  .btn-lg {
    @apply text-lg px-8 py-4;
  }

  .btn-sm {
    @apply text-sm px-4 py-2;
  }

  .card {
    @apply bg-dark-800 rounded-2xl border border-dark-700 overflow-hidden;
  }

  .card-header {
    @apply px-6 py-4 border-b border-dark-700;
  }

  .card-body {
    @apply p-6;
  }

  .input {
    @apply w-full bg-dark-900 border border-dark-600 rounded-xl px-4 py-3 text-white placeholder-dark-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200;
  }

  .select {
    @apply input appearance-none cursor-pointer;
  }

  .label {
    @apply block text-sm font-medium text-dark-200 mb-2;
  }

  .badge {
    @apply inline-flex items-center px-3 py-1 rounded-full text-xs font-medium;
  }

  .badge-success {
    @apply badge bg-emerald-500/20 text-emerald-400;
  }

  .badge-warning {
    @apply badge bg-amber-500/20 text-amber-400;
  }

  .badge-danger {
    @apply badge bg-red-500/20 text-red-400;
  }

  .badge-info {
    @apply badge bg-blue-500/20 text-blue-400;
  }

  .table-container {
    @apply w-full overflow-x-auto;
  }

  .table-container table {
    @apply w-full;
  }

  .table-container th {
    @apply px-4 py-3 text-left text-xs font-semibold text-dark-300 uppercase tracking-wider bg-dark-900;
  }

  .table-container td {
    @apply px-4 py-4 text-sm;
  }

  .table-container tbody tr {
    @apply border-b border-dark-700 hover:bg-dark-800/50 transition-colors;
  }

  .stat-card {
    @apply card p-6 flex flex-col;
  }

  .stat-value {
    @apply text-3xl font-bold text-white;
  }

  .stat-label {
    @apply text-sm text-dark-400 mt-1;
  }

  .menu-item-card {
    @apply card p-4 cursor-pointer hover:border-primary-500 hover:shadow-lg hover:shadow-primary-500/10 transition-all duration-200 active:scale-95;
  }

  .order-item {
    @apply flex items-center justify-between p-3 bg-dark-900 rounded-xl;
  }

  .table-card {
    @apply relative aspect-square rounded-2xl flex flex-col items-center justify-center cursor-pointer transition-all duration-200 hover:scale-105;
  }

  .table-available {
    @apply table-card bg-emerald-600/20 border-2 border-emerald-500 text-emerald-400;
  }

  .table-occupied {
    @apply table-card bg-red-600/20 border-2 border-red-500 text-red-400;
  }

  .table-reserved {
    @apply table-card bg-amber-600/20 border-2 border-amber-500 text-amber-400;
  }

  .sidebar-link {
    @apply flex items-center gap-3 px-4 py-3 rounded-xl text-dark-300 hover:text-white hover:bg-dark-800 transition-all duration-200;
  }

  .sidebar-link.active {
    @apply bg-primary-500/10 text-primary-400;
  }

  .modal-overlay {
    @apply fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4;
  }

  .modal-content {
    @apply bg-dark-800 rounded-2xl border border-dark-700 shadow-2xl max-h-[90vh] overflow-auto animate-fade-in;
  }
}

@layer utilities {
  .text-gradient {
    @apply bg-gradient-to-r from-primary-400 to-primary-600 bg-clip-text text-transparent;
  }

  .glow {
    box-shadow: 0 0 40px rgba(249, 168, 37, 0.15);
  }

  .glow-sm {
    box-shadow: 0 0 20px rgba(249, 168, 37, 0.1);
  }

  .animate-fadeIn {
    animation: fadeIn 0.15s ease-out forwards;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(-4px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
}

/* Light Theme Styles */
.light-theme {
  /* Background colors */
  --bg-dark-950: #f8fafc;
  --bg-dark-900: #f1f5f9;
  --bg-dark-800: #e2e8f0;
  --bg-dark-700: #cbd5e1;
  --bg-dark-600: #94a3b8;
  --bg-dark-500: #64748b;
  --bg-dark-400: #475569;
  --bg-dark-300: #334155;
  --bg-dark-200: #1e293b;
}

.light-theme body {
  @apply text-gray-900;
  background-color: #f8fafc;
}

.light-theme .bg-dark-950 {
  background-color: #f8fafc;
}

.light-theme .bg-dark-900 {
  background-color: #f1f5f9;
}

.light-theme .bg-dark-900\/95 {
  background-color: rgba(241, 245, 249, 0.95);
}

.light-theme .bg-dark-900\/50 {
  background-color: rgba(241, 245, 249, 0.5);
}

.light-theme .bg-dark-800 {
  background-color: #e2e8f0;
}

.light-theme .bg-dark-800\/50 {
  background-color: rgba(226, 232, 240, 0.5);
}

.light-theme .bg-dark-700 {
  background-color: #cbd5e1;
}

.light-theme .bg-dark-700\/50 {
  background-color: rgba(203, 213, 225, 0.5);
}

.light-theme .bg-dark-700\/30 {
  background-color: rgba(203, 213, 225, 0.3);
}

.light-theme .bg-dark-600 {
  background-color: #94a3b8;
}

.light-theme .hover\:bg-dark-800:hover {
  background-color: #e2e8f0;
}

.light-theme .hover\:bg-dark-700:hover {
  background-color: #cbd5e1;
}

.light-theme .hover\:bg-dark-600:hover {
  background-color: #94a3b8;
}

.light-theme .hover\:bg-dark-700\/50:hover {
  background-color: rgba(203, 213, 225, 0.5);
}

/* Text colors for light theme */
.light-theme .text-white {
  color: #1e293b;
}

.light-theme .text-dark-300 {
  color: #475569;
}

.light-theme .text-dark-400 {
  color: #64748b;
}

.light-theme .text-dark-500 {
  color: #94a3b8;
}

.light-theme .text-dark-600 {
  color: #cbd5e1;
}

.light-theme .hover\:text-white:hover {
  color: #1e293b;
}

/* Border colors for light theme */
.light-theme .border-dark-700 {
  border-color: #cbd5e1;
}

.light-theme .border-dark-600 {
  border-color: #94a3b8;
}

.light-theme .focus\:border-primary-500:focus {
  border-color: #f9a825;
}

/* Input specific styles */
.light-theme .input,
.light-theme input[type="text"],
.light-theme input[type="tel"],
.light-theme input[type="email"],
.light-theme input[type="password"],
.light-theme textarea,
.light-theme select {
  background-color: #ffffff;
  border-color: #cbd5e1;
  color: #1e293b;
}

.light-theme .input::placeholder,
.light-theme input::placeholder,
.light-theme textarea::placeholder {
  color: #94a3b8;
}

.light-theme .input:focus,
.light-theme input:focus,
.light-theme textarea:focus {
  border-color: #f9a825;
  box-shadow: 0 0 0 2px rgba(249, 168, 37, 0.2);
}

/* Scrollbar for light theme */
.light-theme ::-webkit-scrollbar-track {
  background-color: #f1f5f9;
}

.light-theme ::-webkit-scrollbar-thumb {
  background-color: #cbd5e1;
}

.light-theme ::-webkit-scrollbar-thumb:hover {
  background-color: #94a3b8;
}

/* Card and components */
.light-theme .card {
  background-color: #ffffff;
  border-color: #e2e8f0;
}

.light-theme .menu-item-card {
  background-color: #ffffff;
  border-color: #e2e8f0;
}

/* Table styles */
.light-theme .table-container th {
  background-color: #f1f5f9;
  color: #475569;
}

.light-theme .table-container tbody tr {
  border-color: #e2e8f0;
}

.light-theme .table-container tbody tr:hover {
  background-color: rgba(241, 245, 249, 0.5);
}

/* Modal */
.light-theme .modal-content {
  background-color: #ffffff;
  border-color: #e2e8f0;
}

/* Sidebar link */
.light-theme .sidebar-link {
  color: #475569;
}

.light-theme .sidebar-link:hover {
  color: #1e293b;
  background-color: #e2e8f0;
}

.light-theme .sidebar-link.active {
  background-color: rgba(249, 168, 37, 0.15);
  color: #d97706;
}

/* Black overlay adjustments */
.light-theme .bg-black\/60 {
  background-color: rgba(0, 0, 0, 0.4);
}
