import{d as b,u as Q,i as W,be as B,bf as J,r as c,q as A,t as x,j as e,E as m,h as n,T as K,f as Y,bg as X,ak as Z,bh as ee,aA as se,M as te,bi as D}from"./index-Bqw9B6PQ.js";import{u as ae}from"./useRealtimeRefresh-0HGEGPg6.js";import{u as re}from"./useDemoGuard-j3N23emi.js";import{D as le}from"./database-D5kK8E1e.js";import{D as ne}from"./dollar-sign-B8raBqMt.js";import{G as ie}from"./globe-DmrCKMmL.js";const ce=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],L=b("download",ce);const de=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],M=b("external-link",de);const xe=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],me=b("save",xe);const oe=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],he=b("store",oe);function fe(){const{t:s,language:p,setLanguage:V}=Q(),{smacEnabled:u,setSmacEnabled:T}=W(),{licenseStatus:v,adminSettings:d}=B(),{planType:g,isPremium:y}=J(),{checkCanWrite:k}=re(),[r,l]=c.useState(null),[z,R]=c.useState(!0),[w,_]=c.useState(!1),[U,j]=c.useState(!1),[N,S]=c.useState(p),[o,C]=c.useState(u),[F,E]=c.useState("");c.useEffect(()=>{P()},[]),c.useEffect(()=>{S(p)},[p]),c.useEffect(()=>{C(u)},[u]),c.useEffect(()=>{r?.cover_charge!==void 0&&E(r.cover_charge?r.cover_charge.toString().replace(".",","):"")},[r?.cover_charge]);async function P(){try{const t=await A();l(t)}catch(t){console.error("Error loading settings:",t),x(s("settings.errorLoading"),"error")}finally{R(!1)}}ae(P);async function H(){if(k()&&r){_(!0);try{await D(r),N!==p&&V(N),o!==u&&await T(o);const t=await A();l(t),x(s("settings.saved"),"success")}catch(t){console.error("Error saving settings:",t),x(s("settings.errorSaving"),"error")}finally{_(!1)}}}async function G(t){if(!k()||!r)return;const a={...r,auto_print_enabled:t};l(a),D(a).then(()=>{x(s(t?"settings.autoPrintEnabled":"settings.autoPrintDisabled"),"success")}).catch(i=>{console.error("Error saving auto print setting:",i),x(s("settings.errorSaving"),"error"),l(r)})}function O(){try{const t={};["categories","menu_items","tables","ingredients","inventory","orders","order_items","employees","work_shifts","reservations","expenses","settings"].forEach($=>{const I=localStorage.getItem(`kebab_${$}`);I&&(t[$]=JSON.parse(I))});const i=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),h=URL.createObjectURL(i),f=document.createElement("a");f.href=h,f.download=`restaurant_backup_${new Date().toISOString().split("T")[0]}.json`,f.click(),URL.revokeObjectURL(h),x(s("settings.backupExported"),"success")}catch(t){console.error("Error exporting data:",t),x(s("settings.backupError"),"error")}}function q(){window.open("https://github.com/andreafabbri97/restaurant-manager/blob/main/supabase-schema.sql","_blank")}return z?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500"})}):e.jsxs("div",{className:"space-y-4 sm:space-y-6 max-w-4xl",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-white",children:s("settings.title")}),e.jsx("p",{className:"text-dark-400 mt-1 text-sm sm:text-base",children:s("settings.subtitle")})]}),e.jsx("button",{onClick:H,disabled:w,className:"btn-primary text-sm sm:text-base w-full sm:w-auto justify-center",children:w?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-dark-900"}):e.jsxs(e.Fragment,{children:[e.jsx(me,{className:"w-4 h-4 sm:w-5 sm:h-5"}),s("common.save")]})})]}),e.jsx("div",{className:`card p-3 sm:p-4 ${m?"border-emerald-500/50":"border-amber-500/50"}`,children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:`w-10 h-10 sm:w-12 sm:h-12 rounded-xl flex items-center justify-center flex-shrink-0 ${m?"bg-emerald-500/20":"bg-amber-500/20"}`,children:e.jsx(le,{className:`w-5 h-5 sm:w-6 sm:h-6 ${m?"text-emerald-400":"text-amber-400"}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("h3",{className:"font-semibold text-white text-sm sm:text-base",children:s("settings.database")}),m?e.jsxs("span",{className:"badge-success text-xs",children:[e.jsx(n,{className:"w-3 h-3 mr-1"}),s("settings.databaseConnected")]}):e.jsxs("span",{className:"badge-warning text-xs",children:[e.jsx(K,{className:"w-3 h-3 mr-1"}),s("settings.databaseDemo")]})]}),e.jsx("p",{className:"text-xs sm:text-sm text-dark-400 mt-1",children:s(m?"settings.databaseCloudDesc":"settings.databaseLocalDesc")})]}),!m&&e.jsxs("button",{onClick:()=>j(!0),className:"btn-secondary text-xs sm:text-sm w-full sm:w-auto justify-center",children:[e.jsx(M,{className:"w-4 h-4"}),s("settings.configureSupabase")]})]})}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header flex items-center gap-2",children:[e.jsx(he,{className:"w-4 h-4 sm:w-5 sm:h-5"}),e.jsx("h2",{className:"font-semibold text-white text-sm sm:text-base",children:s("settings.shopInfo")})]}),e.jsxs("div",{className:"card-body space-y-3 sm:space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label text-xs sm:text-sm",children:s("settings.shopName")}),e.jsx("input",{type:"text",value:r?.shop_name||"",onChange:t=>l(a=>a?{...a,shop_name:t.target.value}:null),className:"input text-sm sm:text-base",placeholder:s("settings.shopNamePlaceholder")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label text-xs sm:text-sm",children:s("settings.menuSlogan")}),e.jsx("input",{type:"text",value:r?.menu_slogan||"",onChange:t=>l(a=>a?{...a,menu_slogan:t.target.value}:null),className:"input text-sm sm:text-base",placeholder:s("settings.menuSloganPlaceholder")}),e.jsx("p",{className:"text-xs text-dark-500 mt-1",children:s("settings.menuSloganHint")})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label text-xs sm:text-sm",children:s("settings.address")}),e.jsx("input",{type:"text",value:r?.address||"",onChange:t=>l(a=>a?{...a,address:t.target.value}:null),className:"input text-sm sm:text-base",placeholder:s("settings.addressPlaceholder")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label text-xs sm:text-sm",children:s("settings.phone")}),e.jsx("input",{type:"tel",value:r?.phone||"",onChange:t=>l(a=>a?{...a,phone:t.target.value}:null),className:"input text-sm sm:text-base",placeholder:s("settings.phonePlaceholder")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label text-xs sm:text-sm",children:s("settings.email")}),e.jsx("input",{type:"email",value:r?.email||"",onChange:t=>l(a=>a?{...a,email:t.target.value}:null),className:"input text-sm sm:text-base",placeholder:s("settings.emailPlaceholder")})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header flex items-center gap-2",children:[e.jsx(ne,{className:"w-4 h-4 sm:w-5 sm:h-5"}),e.jsx("h2",{className:"font-semibold text-white text-sm sm:text-base",children:s("settings.financialSettings")})]}),e.jsxs("div",{className:"card-body space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label text-xs sm:text-sm",children:s("settings.currency")}),e.jsxs("select",{value:r?.currency||"€",onChange:t=>l(a=>a?{...a,currency:t.target.value}:null),className:"select text-sm sm:text-base",children:[e.jsx("option",{value:"€",children:s("settings.currencyEuro")}),e.jsx("option",{value:"$",children:s("settings.currencyDollar")}),e.jsx("option",{value:"£",children:s("settings.currencyPound")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label text-xs sm:text-sm",children:s("settings.vatRate")}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",inputMode:"decimal",value:r?.iva_rate??17,onChange:t=>{const a=t.target.value;(a===""||/^\d*\.?\d*$/.test(a))&&l(i=>i?{...i,iva_rate:a===""?0:parseFloat(a)||0}:null)},className:"input text-sm sm:text-base pr-8",placeholder:"17"}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-dark-400",children:"%"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label text-xs sm:text-sm",children:"Soglia Scorta Default"}),e.jsx("input",{type:"text",inputMode:"numeric",value:r?.default_threshold??10,onChange:t=>{const a=t.target.value;(a===""||/^\d*$/.test(a))&&l(i=>i?{...i,default_threshold:a===""?0:parseInt(a)||0}:null)},className:"input text-sm sm:text-base",placeholder:"10"}),e.jsx("p",{className:"text-xs text-dark-500 mt-1",children:"Soglia iniziale assegnata ai nuovi ingredienti. Con l'uso, verrà ricalcolata automaticamente tramite EOQ."})]})]}),e.jsxs("div",{className:"pt-3 border-t border-dark-700",children:[e.jsx("label",{className:"label text-xs sm:text-sm mb-2",children:"Modalità IVA"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("button",{onClick:()=>l(t=>t?{...t,iva_included:!0}:null),className:`flex-1 flex items-center gap-3 p-3 rounded-xl border-2 transition-all ${r?.iva_included!==!1?"border-primary-500 bg-primary-500/10":"border-dark-700 bg-dark-800 hover:border-dark-600"}`,children:[e.jsx("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center ${r?.iva_included!==!1?"border-primary-500":"border-dark-500"}`,children:r?.iva_included!==!1&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary-500"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium text-white text-sm",children:"IVA inclusa nei prezzi"}),e.jsx("p",{className:"text-xs text-dark-400",children:"I prezzi del menu sono già comprensivi di IVA (consigliato)"})]})]}),e.jsxs("button",{onClick:()=>l(t=>t?{...t,iva_included:!1}:null),className:`flex-1 flex items-center gap-3 p-3 rounded-xl border-2 transition-all ${r?.iva_included===!1?"border-primary-500 bg-primary-500/10":"border-dark-700 bg-dark-800 hover:border-dark-600"}`,children:[e.jsx("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center ${r?.iva_included===!1?"border-primary-500":"border-dark-500"}`,children:r?.iva_included===!1&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary-500"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium text-white text-sm",children:"IVA esclusa dai prezzi"}),e.jsx("p",{className:"text-xs text-dark-400",children:"L'IVA viene aggiunta al totale dell'ordine"})]})]})]}),e.jsx("p",{className:"text-xs text-dark-500 mt-2",children:r?.iva_included!==!1?`Esempio: Un prodotto a €10 include già €${(10-10/(1+(r?.iva_rate||17)/100)).toFixed(2)} di IVA. Il cliente paga €10.`:`Esempio: Un prodotto a €10 + IVA (${r?.iva_rate||17}%) = €${(10*(1+(r?.iva_rate||17)/100)).toFixed(2)}. L'IVA viene aggiunta.`})]}),e.jsxs("div",{className:"pt-3 border-t border-dark-700",children:[e.jsx("label",{className:"label text-xs sm:text-sm mb-2",children:s("settings.coverCharge")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-dark-400",children:r?.currency||"€"}),e.jsx("input",{type:"text",value:F,onChange:t=>{const a=t.target.value;if(E(a),/^\d*[.,]?\d*$/.test(a)||a===""){const i=a===""?0:parseFloat(a.replace(",","."))||0;l(h=>h?{...h,cover_charge:i}:null)}},className:"input text-sm sm:text-base w-24",placeholder:"0,00"}),e.jsx("span",{className:"text-dark-400 text-sm",children:s("settings.coverChargePerPerson")})]}),e.jsx("p",{className:"text-xs text-dark-500 mt-2",children:(r?.cover_charge??0)>0?s("settings.coverChargeEnabled"):s("settings.coverChargeDisabled")})]}),e.jsxs("div",{className:"pt-3 border-t border-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label text-xs sm:text-sm mb-1",children:s("settings.autoPrint")}),e.jsx("p",{className:"text-xs text-dark-500",children:s("settings.autoPrintDesc")})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r?.auto_print_enabled||!1,onChange:t=>G(t.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-dark-700 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-800 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),r?.auto_print_enabled&&e.jsxs("div",{className:"space-y-4 mt-4 p-3 bg-dark-900/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label text-xs sm:text-sm mb-2",children:s("settings.printerType")}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{type:"button",onClick:()=>l(t=>t?{...t,printer_type:"thermal"}:null),className:`w-full p-3 rounded-lg border-2 transition-colors text-left ${r?.printer_type==="thermal"?"border-primary-500 bg-primary-500/10":"border-dark-700 bg-dark-800 hover:border-dark-600"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center ${r?.printer_type==="thermal"?"border-primary-500":"border-dark-600"}`,children:r?.printer_type==="thermal"&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white text-sm",children:s("settings.printerTypeThermal")}),e.jsx("p",{className:"text-xs text-dark-400",children:s("settings.printerTypeThermalDesc")})]})]})}),e.jsx("button",{type:"button",onClick:()=>l(t=>t?{...t,printer_type:"standard"}:null),className:`w-full p-3 rounded-lg border-2 transition-colors text-left ${r?.printer_type==="standard"?"border-primary-500 bg-primary-500/10":"border-dark-700 bg-dark-800 hover:border-dark-600"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center ${r?.printer_type==="standard"?"border-primary-500":"border-dark-600"}`,children:r?.printer_type==="standard"&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white text-sm",children:s("settings.printerTypeStandard")}),e.jsx("p",{className:"text-xs text-dark-400",children:s("settings.printerTypeStandardDesc")})]})]})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label text-xs sm:text-sm mb-2",children:s("settings.printerModel")}),e.jsx("input",{type:"text",value:r?.printer_model||"",onChange:t=>l(a=>a?{...a,printer_model:t.target.value}:null),className:"input text-sm sm:text-base w-full",placeholder:s("settings.printerModelPlaceholder")}),e.jsx("p",{className:"text-xs text-dark-500 mt-1",children:s("settings.printerModelHint")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label text-xs sm:text-sm mb-2",children:s("settings.printAgentUrl")}),e.jsx("input",{type:"text",value:r?.print_agent_url||"",onChange:t=>l(a=>a?{...a,print_agent_url:t.target.value}:null),className:"input text-sm sm:text-base w-full",placeholder:s("settings.printAgentUrlPlaceholder")}),e.jsx("p",{className:"text-xs text-dark-500 mt-1",children:s("settings.printAgentUrlHint")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label text-xs sm:text-sm mb-2",children:s("settings.printerIp")}),e.jsx("input",{type:"text",value:r?.printer_ip||"",onChange:t=>l(a=>a?{...a,printer_ip:t.target.value}:null),className:"input text-sm sm:text-base w-full",placeholder:s("settings.printerIpPlaceholder")}),e.jsx("p",{className:"text-xs text-dark-500 mt-1",children:s("settings.printerIpHint")})]}),e.jsxs("div",{className:"p-3 bg-primary-500/10 border border-primary-500/30 rounded-lg",children:[e.jsx("p",{className:"text-sm text-primary-400 font-medium mb-2",children:s("settings.autoPrintInfo")}),e.jsxs("ul",{className:"text-xs text-primary-300 space-y-1 list-disc list-inside",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"With Print Agent"}),": ",s("settings.autoPrintWithAgent")]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Without Print Agent"}),": ",s("settings.autoPrintWithoutAgent")]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Direct IP"}),": ",s("settings.autoPrintDirectIp")]})]})]})]})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header flex items-center gap-2",children:[e.jsx(ie,{className:"w-4 h-4 sm:w-5 sm:h-5"}),e.jsx("h2",{className:"font-semibold text-white text-sm sm:text-base",children:s("settings.languageSection")})]}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{children:[e.jsx("label",{className:"label text-xs sm:text-sm",children:s("settings.language")}),e.jsxs("select",{value:N,onChange:t=>S(t.target.value),className:"select max-w-xs text-sm sm:text-base",children:[e.jsx("option",{value:"it",children:s("settings.italian")}),e.jsx("option",{value:"en",children:s("settings.english")})]})]})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header flex items-center gap-2",children:[e.jsx(Y,{className:"w-4 h-4 sm:w-5 sm:h-5"}),e.jsx("h2",{className:"font-semibold text-white text-sm sm:text-base",children:s("settings.smacSection")})]}),e.jsxs("div",{className:"card-body space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white text-sm sm:text-base",children:s("settings.smacEnabled")}),e.jsx("p",{className:"text-xs sm:text-sm text-dark-400",children:s("settings.smacEnabledDesc")})]}),e.jsx("button",{onClick:()=>C(!o),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${o?"bg-primary-500":"bg-dark-600"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${o?"translate-x-6":"translate-x-1"}`})})]}),e.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-xl p-3 sm:p-4",children:e.jsxs("p",{className:"text-xs sm:text-sm text-blue-400",children:[e.jsxs("strong",{children:[s("settings.smacNote"),":"]})," ",s("settings.smacNoteDesc")]})})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header flex items-center gap-2",children:[e.jsx(L,{className:"w-4 h-4 sm:w-5 sm:h-5"}),e.jsx("h2",{className:"font-semibold text-white text-sm sm:text-base",children:s("settings.backup")})]}),e.jsxs("div",{className:"card-body space-y-3 sm:space-y-4",children:[e.jsx("p",{className:"text-dark-400 text-xs sm:text-sm",children:s("settings.backupDesc")}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("button",{onClick:O,className:"btn-secondary text-sm sm:text-base",children:[e.jsx(L,{className:"w-4 h-4 sm:w-5 sm:h-5"}),s("settings.exportBackup")]})})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header flex items-center gap-2",children:[e.jsx(X,{className:"w-4 h-4 sm:w-5 sm:h-5"}),e.jsx("h2",{className:"font-semibold text-white text-sm sm:text-base",children:"Piano Licenza"})]}),e.jsxs("div",{className:"card-body space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white text-sm sm:text-base",children:"Piano attivo"}),e.jsx("p",{className:"text-xs sm:text-sm text-dark-400",children:"Il tuo piano licenza attuale"})]}),e.jsx("span",{className:`px-4 py-2 rounded-full text-sm font-bold ${g==="premium"?"bg-green-500/20 text-green-400 border border-green-500/50":g==="standard"?"bg-blue-500/20 text-blue-400 border border-blue-500/50":"bg-amber-500/20 text-amber-400 border border-amber-500/50"}`,children:g.toUpperCase()})]}),v?.expiryDate&&e.jsxs("div",{className:"flex items-center justify-between py-3 border-t border-dark-700",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white text-sm sm:text-base",children:"Scadenza licenza"}),e.jsx("p",{className:"text-xs sm:text-sm text-dark-400",children:"Data di rinnovo"})]}),e.jsx("span",{className:"text-white font-medium",children:v.expiryDate.split("-").reverse().join("/")})]}),e.jsxs("div",{className:"py-3 border-t border-dark-700",children:[e.jsx("p",{className:"font-medium text-white text-sm sm:text-base mb-3",children:"Funzionalità incluse"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-dark-300",children:[e.jsx(n,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{children:"Dashboard"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-dark-300",children:[e.jsx(n,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{children:"Gestione Ordini"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-dark-300",children:[e.jsx(n,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{children:"Gestione Tavoli"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-dark-300",children:[e.jsx(n,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{children:"Gestione Menu"})]}),g!=="demo"&&e.jsxs("div",{className:"flex items-center gap-2 text-dark-300",children:[e.jsx(n,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{children:"Gestione Utenti"})]}),y&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 text-dark-300",children:[e.jsx(n,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{children:"Report e Statistiche"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-dark-300",children:[e.jsx(n,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{children:"SMAC Card"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-dark-300",children:[e.jsx(n,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{children:"Inventario"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-dark-300",children:[e.jsx(n,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{children:"Ricette e Costi"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-dark-300",children:[e.jsx(n,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{children:"Gestione Personale"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-dark-300",children:[e.jsx(n,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{children:"Chiusura Cassa"})]})]})]})]}),!y&&e.jsxs("div",{className:"py-3 border-t border-dark-700",children:[e.jsx("p",{className:"font-medium text-white text-sm sm:text-base mb-3",children:"Vuoi fare l'upgrade?"}),e.jsx("div",{className:"bg-dark-900 rounded-xl p-4 space-y-2",children:d?.blocked_contact_phone||d?.blocked_contact_email?e.jsxs(e.Fragment,{children:[d?.blocked_contact_phone&&e.jsxs("a",{href:`tel:${d.blocked_contact_phone.replace(/\s/g,"")}`,className:"flex items-center gap-2 text-primary-400 hover:text-primary-300 text-sm",children:[e.jsx(Z,{className:"w-4 h-4"}),e.jsx("span",{children:d.blocked_contact_phone})]}),d?.blocked_contact_email&&e.jsxs("a",{href:`mailto:${d.blocked_contact_email}?subject=Richiesta upgrade piano`,className:"flex items-center gap-2 text-primary-400 hover:text-primary-300 text-sm",children:[e.jsx(ee,{className:"w-4 h-4"}),e.jsx("span",{children:d.blocked_contact_email})]})]}):e.jsx("p",{className:"text-dark-400 text-sm",children:"Contatta il fornitore del software per informazioni sull'upgrade."})})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header flex items-center gap-2",children:[e.jsx(se,{className:"w-4 h-4 sm:w-5 sm:h-5"}),e.jsx("h2",{className:"font-semibold text-white text-sm sm:text-base",children:s("settings.about")})]}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-4 text-center",children:[e.jsxs("div",{className:"p-3 sm:p-4 bg-dark-900 rounded-xl",children:[e.jsx("p",{className:"text-lg sm:text-2xl font-bold text-primary-400",children:"3.0"}),e.jsx("p",{className:"text-xs sm:text-sm text-dark-400",children:s("settings.version")})]}),e.jsxs("div",{className:"p-3 sm:p-4 bg-dark-900 rounded-xl",children:[e.jsx("p",{className:"text-lg sm:text-2xl font-bold text-blue-400",children:"React"}),e.jsx("p",{className:"text-xs sm:text-sm text-dark-400",children:s("settings.frontend")})]}),e.jsxs("div",{className:"p-3 sm:p-4 bg-dark-900 rounded-xl",children:[e.jsx("p",{className:"text-lg sm:text-2xl font-bold text-emerald-400",children:"Supabase"}),e.jsx("p",{className:"text-xs sm:text-sm text-dark-400",children:s("settings.databaseType")})]}),e.jsxs("div",{className:"p-3 sm:p-4 bg-dark-900 rounded-xl",children:[e.jsx("p",{className:"text-lg sm:text-2xl font-bold text-purple-400",children:"TS"}),e.jsx("p",{className:"text-xs sm:text-sm text-dark-400",children:s("settings.languageType")})]})]})})]}),e.jsx(te,{isOpen:U,onClose:()=>j(!1),title:"Configura Supabase",size:"lg",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-xl p-4",children:[e.jsx("h3",{className:"font-semibold text-blue-400 mb-2",children:"Come configurare Supabase:"}),e.jsxs("ol",{className:"text-sm text-dark-300 space-y-2 list-decimal list-inside",children:[e.jsxs("li",{children:["Vai su ",e.jsx("a",{href:"https://supabase.com",target:"_blank",rel:"noopener noreferrer",className:"text-primary-400 underline",children:"supabase.com"})," e crea un account gratuito"]}),e.jsx("li",{children:"Crea un nuovo progetto"}),e.jsxs("li",{children:["Vai su ",e.jsx("strong",{children:"SQL Editor"})," e incolla lo schema SQL"]}),e.jsxs("li",{children:["Vai su ",e.jsx("strong",{children:"Settings → API"})," e copia URL e anon key"]}),e.jsxs("li",{children:["Crea un file ",e.jsx("code",{className:"bg-dark-700 px-1 rounded",children:".env"})," nella root del progetto con:",e.jsx("pre",{className:"mt-2 p-2 bg-dark-900 rounded text-xs overflow-x-auto",children:`VITE_SUPABASE_URL=your-project-url
VITE_SUPABASE_ANON_KEY=your-anon-key`})]}),e.jsx("li",{children:"Riavvia l'applicazione"})]})]}),e.jsxs("div",{className:"bg-dark-900 rounded-xl p-4",children:[e.jsxs("p",{className:"text-dark-300 mb-3",children:["Lo schema SQL completo si trova nel file ",e.jsx("code",{className:"bg-dark-700 px-1 rounded",children:"supabase-schema.sql"})," nella root del progetto."]}),e.jsxs("button",{onClick:q,className:"btn-secondary w-full",children:[e.jsx(M,{className:"w-4 h-4"}),"Apri Schema SQL su GitHub"]})]}),e.jsx("button",{onClick:()=>j(!1),className:"btn-primary w-full",children:"Ho capito"})]})})]})}export{fe as Settings};
