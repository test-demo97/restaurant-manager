import{r as n,q as u}from"./index-DR9bR0UV.js";const a={"€":{symbol:"€",position:"before",decimals:2},$:{symbol:"$",position:"before",decimals:2},"£":{symbol:"£",position:"before",decimals:2}},s="€";function g(){const[e,o]=n.useState(s),[d,l]=n.useState(!0),c=n.useCallback(async()=>{try{const t=await u();o(t.currency||s)}catch(t){console.error("Error loading currency:",t),o(s)}finally{l(!1)}},[]);n.useEffect(()=>{c();const t=r=>{r.detail?.currency&&o(r.detail.currency)};return window.addEventListener("settings-updated",t),()=>{window.removeEventListener("settings-updated",t)}},[c]);const y=n.useCallback(t=>{const r=a[e]||a[s],i=t.toFixed(r.decimals);return r.position==="before"?`${r.symbol}${i}`:`${i}${r.symbol}`},[e]),f=n.useCallback(()=>e,[e]);return{currency:e,loading:d,formatPrice:y,getCurrencySymbol:f,reload:c}}const m=new Set;function b(e){m.forEach(o=>o(e))}u().then(e=>{e.currency}).catch(()=>{});typeof window<"u"&&window.addEventListener("settings-updated",(e=>{e.detail?.currency&&b(e.detail.currency)}));export{g as u};
